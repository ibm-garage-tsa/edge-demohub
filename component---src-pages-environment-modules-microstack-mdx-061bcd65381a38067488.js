(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{"2vla":function(e,t,a){"use strict";a.r(t),a.d(t,"_frontmatter",(function(){return i})),a.d(t,"default",(function(){return b}));var n=a("k1TG"),c=a("8o2o"),o=(a("q1tI"),a("7ljp")),r=a("013z"),i=(a("qKvR"),{}),p={_frontmatter:i},s=r.a;function b(e){var t=e.components,a=Object(c.a)(e,["components"]);return Object(o.b)(s,Object(n.a)({},p,a,{components:t,mdxType:"MDXLayout"}),Object(o.b)("h2",null,"Preparing the Virtual Server Instance"),Object(o.b)("ol",null,Object(o.b)("li",{parentName:"ol"},Object(o.b)("p",{parentName:"li"},"In order to create an Openstack instance in IBM Cloud following this procedure you need to setup a VPC and create a Gen2 virtual server instance (VSI) with Ubuntu 18.04. For the testing purpose I have used ",Object(o.b)("inlineCode",{parentName:"p"},"bx2-8x32")," profile. Instance needs to be assigned with the floating IP to provide connectivity to the Internet.")),Object(o.b)("li",{parentName:"ol"},Object(o.b)("p",{parentName:"li"},"Connect to the VSI. Update the Ubuntu"),Object(o.b)("pre",{parentName:"li"},Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-bash"}),"apt-get update\napt-get upgarde -y\n")),Object(o.b)("p",{parentName:"li"},"In case of warning over the ",Object(o.b)("inlineCode",{parentName:"p"},"sshd_config")," file you can either keep the local version or use the maintainer package."))),Object(o.b)("h2",null,"Installing the Openstack"),Object(o.b)("ol",{start:3},Object(o.b)("li",{parentName:"ol"},Object(o.b)("p",{parentName:"li"},"Install the Microstack"),Object(o.b)("pre",{parentName:"li"},Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-bash"}),"snap install microstack --classic --beta\n")),Object(o.b)("p",{parentName:"li"},"The installation should take less then 5 minutes (depends on the network speed) and if all works as expected will finish with the following message:"),Object(o.b)("pre",{parentName:"li"},Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-bash"}),"2020-06-03T08:03:07Z INFO Waiting for restart...\nmicrostack (beta) stein from Canonical✓ installed\n"))),Object(o.b)("li",{parentName:"ol"},Object(o.b)("p",{parentName:"li"},"Initialize the Microstack\nMicroStack needs to be initialised, so that networks and databases get configured. To do this, run:"),Object(o.b)("pre",{parentName:"li"},Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-bash"}),"microstack.init --auto\n")),Object(o.b)("p",{parentName:"li"},"Initialization process may take 10-15 minutes.")),Object(o.b)("li",{parentName:"ol"},Object(o.b)("p",{parentName:"li"},"Create alias for Openstack CLI"),Object(o.b)("pre",{parentName:"li"},Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-bash"}),'alias os="microstack.openstack"\n')))),Object(o.b)("h2",null,"Exposing the Openstack endpoints on the external IP"),Object(o.b)("p",null,"By default Microstack creates intenal network 10.20.20.1/24 and this network is used for exposing API endpoints. You need to expose public endpoints in VSI external IP, so the CloudForms can connect to the Openstack services."),Object(o.b)("ol",{start:6},Object(o.b)("li",{parentName:"ol"},"Edit the default security group in your VPC, adding incoming rule for port 5000"),Object(o.b)("li",{parentName:"ol"},"Change the default admin password. (Default is ",Object(o.b)("inlineCode",{parentName:"li"},"keystone"),").")),Object(o.b)("p",null,"openstack endpoint create —region microstack volumev2 public ",Object(o.b)("a",Object(n.a)({parentName:"p"},{href:"http://10.20.20.1:8776/v2/%25%5C(project_id%5C)s"}),"http://10.20.20.1:8776/v2/%\\(project_id\\)s"),"\nopenstack endpoint create —region microstack volumev2 internal ",Object(o.b)("a",Object(n.a)({parentName:"p"},{href:"http://10.20.20.1:8776/v2/%25%5C(project_id%5C)s"}),"http://10.20.20.1:8776/v2/%\\(project_id\\)s"),"\nopenstack endpoint create —region microstack volumev2 admin ",Object(o.b)("a",Object(n.a)({parentName:"p"},{href:"http://10.20.20.1:8776/v2/%25%5C(project_id%5C)s"}),"http://10.20.20.1:8776/v2/%\\(project_id\\)s"),"\nopenstack endpoint create —region microstack volumev3 public ",Object(o.b)("a",Object(n.a)({parentName:"p"},{href:"http://10.20.20.1:8776/v3/%25%5C(project_id%5C)s"}),"http://10.20.20.1:8776/v3/%\\(project_id\\)s"),"\nopenstack endpoint create —region microstack volumev3 internal ",Object(o.b)("a",Object(n.a)({parentName:"p"},{href:"http://10.20.20.1:8776/v3/%25%5C(project_id%5C)s"}),"http://10.20.20.1:8776/v3/%\\(project_id\\)s"),"\nopenstack endpoint create —region microstack volumev3 admin ",Object(o.b)("a",Object(n.a)({parentName:"p"},{href:"http://10.20.20.1:8776/v3/%25%5C(project_id%5C)s"}),"http://10.20.20.1:8776/v3/%\\(project_id\\)s")))}b.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-environment-modules-microstack-mdx-061bcd65381a38067488.js.map