{"componentChunkName":"component---src-pages-labs-configenv-index-mdx","path":"/labs/configenv/","result":{"pageContext":{"frontmatter":{"title":"Prerequisite - Configure Contexts","description":"IBM Cloud Pak for MCM"},"relativePagePath":"/labs/configenv/index.mdx","titleType":"page","MdxNode":{"id":"8db0c318-f205-5ffd-bad7-dc5da71ceaee","children":[],"parent":"99667383-4991-517e-9803-3427a3584e98","internal":{"content":"---\ntitle: Prerequisite - Configure Contexts\ndescription: IBM Cloud Pak for MCM\n---\n\n<PageDescription>\n\nNow let's see how to configure contexts to access your Clusters.\n\n</PageDescription>\n\n<AnchorLinks>\n  <AnchorLink>Configuring your ROKS Hub Cluster context</AnchorLink>\n  <AnchorLink>Configuring your ROKS Managed Cluster context</AnchorLink>\n  <AnchorLink>(Optional) Configuring your IKS Cluster context</AnchorLink>\n</AnchorLinks>\n\n***\n\n## Configuring your ROKS Hub Cluster context\n\n1.Back to the Cloud Pak for Multicloud Management Web Console (if you are not there, check [here](../beforestart/) how to open your console page).\n\n  ![](images/1-cloudpak-cli.png)\n\n2.Select the **user icon**, then click **Configure client**.\n\n  ![](images/2-cloudpak-cli.png)\n\n3.The cluster configuration details display and resemble the client configuration code. Copy and paste the configuration information to your command line, and press Enter.\n\n  ![](images/11-cloudpak-cli.png)\n\n  ![](images/12-cloudpak-cli.png)\n\n4.Check the Kubernetes contexts available, running the command below:\n\n```\nkubectl config get-contexts\n```\n\n  You should have a mycluster-context that point to your ROKS Hub cluster.\n\n  ![](images/13-cloudpak-cli.png)\n\n  Next step, you will rename this context to simplify how you interact with your ROKS Hub server during our lab.\n\n5.Rename your context, running the command below:\n\n```\nkubectl config rename-context mycluster-context roks-hub-cluster\n```\n\n6.Now, let's set the current Kubernetes context\n```\nkubectl config use-context roks-hub-cluster\n```\n\n  >Note: Anytime that you want to connect to your ROKS Hub cluster, you just need to run the command above.\n\n7.Let's test the new context configuration. Run the command below to get the cluster nodes.\n```\noc get nodes\n```\n\n  ![](images/24-cloudpak-cli.png)\n\n  Great, your ROKS Hub cluster is configured and ready to use.\n\n***\n\n## Configuring your ROKS Managed Cluster context\n\n1.Back to the OpenShift Managed Cluster Web Console (if you are not there, you should have an email with a link to OpenShift Console, you received this e-mail when you requested the environment. Note: it is the email about the Cloud Pak Apps cluster not the initial one about Management Pak).\n\n  ![](images/32-cloudpak-cli.png)\n\n2.On the top right of the screen, click on your **username** and select **Copy Login Command**.\n\n  ![](images/33-cloudpak-cli.png)\n\n3.On the new page, click **Display Token**.\n\n  ![](images/34-cloudpak-cli.png)\n\n4.**Copy** the log in command.\n\n  ![](images/35-cloudpak-cli.png)\n\n5.Back to the Terminal window, **paste** and **run** the login command.\n\n  ![](images/36-cloudpak-cli.png)\n\n  The OC login command, created a specific Kubernetes context to your Managed cluster. Let's check it!\n\n6.Check the Kubernetes contexts available, running the command below:\n\n```\nkubectl config get-contexts\n```\n\n  You should have a new current context that point to your ROKS Managed cluster.\n\n  ![](images/38-cloudpak-cli.png)\n\n  Next step, you will rename this context to simplify how you interact with your ROKS Managed server during our lab. Copy the full name of your current context (default/...).\n\n\n5.Rename your context, running the command below:\n\n```\nkubectl config rename-context <default_context/full_name> roks-managed-cluster\n```\n\n6.Now, let's set the current Kubernetes context\n```\nkubectl config use-context roks-managed-cluster\n```\n\n  >Note: Anytime that you want to connect to your ROKS Managed cluster, you just need to run the command above.\n\n7.Let's test the new context configuration. Run the command below to get the cluster nodes.\n```\noc get nodes\n```\n\n  ![](images/37-cloudpak-cli.png)\n\n  Great, your ROKS Managed cluster is configured and ready to use.\n\n***\n\n## (Optional) Configuring your IKS Cluster context\n\n> There is a known issue to import IKS Kubernetes 1.16 on CP4MCM 1.3.1. Because of that we are not using IKS in the lab yet, but we are working to solve it and it will be available soon!\n\n1.Back to the [IBM Cloud Dashboard page](https://cloud.ibm.com/).\n\n  ![](images/25-cloudpak-cli.png)\n\n2.Confirm that you are using your personal account (account with your name), not the DTE account.\n\n  ![](images/26-cloudpak-cli.png)\n\n3.On IBM Cloud Dashboard, click **Clusters** to see your IKS Free Cluster.\n\n  ![](images/27-cloudpak-cli.png)\n\n4.Click the IKS Free cluster to open the cluster view.\n\n  ![](images/28-cloudpak-cli.png)\n\n5.To configure your CLI to access this cluster, you will need the cluster name, take note of it.\n\n  ![](images/29-cloudpak-cli.png)\n\n6.Back to the Terminal window, if you are not logged in IBM Cloud CLI, go ahead and log in using your IBM Cloud API Key (check IBM Cloud CLI section on [Install CLI Tools page](../installcli) to know how to create an API key)\n\n```\nibmcloud login --apikey @myic.key -r us-south -g default -c <your_ibm_id>\n```\n\n7.Set the Kubernetes context to your cluster for this terminal session.\n```\nibmcloud ks cluster config --cluster mycluster-free\n```\n\n  ![](images/30-cloudpak-cli.png)\n\n8.Check the Kubernetes context available, running the command below:\n\n```\nkubectl config get-contexts\n```\n\n  You should have a mycluster-free that point to your IKS cluster.\n\n  ![](images/39-cloudpak-cli.png)\n\n  Next step, you will rename this context to simplify how you interact with your IKS server during our lab. Copy the full name of your mycluster-free context.\n\n9.Rename your context, running the command below:\n\n```\nkubectl config rename-context <mycluster-free/full_name> iks-free-cluster\n```\n\n10.Now, let's set the current Kubernetes context\n```\nkubectl config use-context iks-free-cluster\n```\n\n  >Note: Anytime that you want to connect to your IKS Free cluster, you just need to run the command above.\n\n11.Let's test the new context configuration. Run the command below to get the cluster nodes.\n```\nkubectl get nodes\n```\n\n  ![](images/31-cloudpak-cli.png)\n\n  Great, your IKS cluster is configured and ready to use.\n","type":"Mdx","contentDigest":"b98af2591c27fd648213ff9a3e379a2a","counter":285,"owner":"gatsby-plugin-mdx"},"frontmatter":{"title":"Prerequisite - Configure Contexts","description":"IBM Cloud Pak for MCM"},"exports":{},"rawBody":"---\ntitle: Prerequisite - Configure Contexts\ndescription: IBM Cloud Pak for MCM\n---\n\n<PageDescription>\n\nNow let's see how to configure contexts to access your Clusters.\n\n</PageDescription>\n\n<AnchorLinks>\n  <AnchorLink>Configuring your ROKS Hub Cluster context</AnchorLink>\n  <AnchorLink>Configuring your ROKS Managed Cluster context</AnchorLink>\n  <AnchorLink>(Optional) Configuring your IKS Cluster context</AnchorLink>\n</AnchorLinks>\n\n***\n\n## Configuring your ROKS Hub Cluster context\n\n1.Back to the Cloud Pak for Multicloud Management Web Console (if you are not there, check [here](../beforestart/) how to open your console page).\n\n  ![](images/1-cloudpak-cli.png)\n\n2.Select the **user icon**, then click **Configure client**.\n\n  ![](images/2-cloudpak-cli.png)\n\n3.The cluster configuration details display and resemble the client configuration code. Copy and paste the configuration information to your command line, and press Enter.\n\n  ![](images/11-cloudpak-cli.png)\n\n  ![](images/12-cloudpak-cli.png)\n\n4.Check the Kubernetes contexts available, running the command below:\n\n```\nkubectl config get-contexts\n```\n\n  You should have a mycluster-context that point to your ROKS Hub cluster.\n\n  ![](images/13-cloudpak-cli.png)\n\n  Next step, you will rename this context to simplify how you interact with your ROKS Hub server during our lab.\n\n5.Rename your context, running the command below:\n\n```\nkubectl config rename-context mycluster-context roks-hub-cluster\n```\n\n6.Now, let's set the current Kubernetes context\n```\nkubectl config use-context roks-hub-cluster\n```\n\n  >Note: Anytime that you want to connect to your ROKS Hub cluster, you just need to run the command above.\n\n7.Let's test the new context configuration. Run the command below to get the cluster nodes.\n```\noc get nodes\n```\n\n  ![](images/24-cloudpak-cli.png)\n\n  Great, your ROKS Hub cluster is configured and ready to use.\n\n***\n\n## Configuring your ROKS Managed Cluster context\n\n1.Back to the OpenShift Managed Cluster Web Console (if you are not there, you should have an email with a link to OpenShift Console, you received this e-mail when you requested the environment. Note: it is the email about the Cloud Pak Apps cluster not the initial one about Management Pak).\n\n  ![](images/32-cloudpak-cli.png)\n\n2.On the top right of the screen, click on your **username** and select **Copy Login Command**.\n\n  ![](images/33-cloudpak-cli.png)\n\n3.On the new page, click **Display Token**.\n\n  ![](images/34-cloudpak-cli.png)\n\n4.**Copy** the log in command.\n\n  ![](images/35-cloudpak-cli.png)\n\n5.Back to the Terminal window, **paste** and **run** the login command.\n\n  ![](images/36-cloudpak-cli.png)\n\n  The OC login command, created a specific Kubernetes context to your Managed cluster. Let's check it!\n\n6.Check the Kubernetes contexts available, running the command below:\n\n```\nkubectl config get-contexts\n```\n\n  You should have a new current context that point to your ROKS Managed cluster.\n\n  ![](images/38-cloudpak-cli.png)\n\n  Next step, you will rename this context to simplify how you interact with your ROKS Managed server during our lab. Copy the full name of your current context (default/...).\n\n\n5.Rename your context, running the command below:\n\n```\nkubectl config rename-context <default_context/full_name> roks-managed-cluster\n```\n\n6.Now, let's set the current Kubernetes context\n```\nkubectl config use-context roks-managed-cluster\n```\n\n  >Note: Anytime that you want to connect to your ROKS Managed cluster, you just need to run the command above.\n\n7.Let's test the new context configuration. Run the command below to get the cluster nodes.\n```\noc get nodes\n```\n\n  ![](images/37-cloudpak-cli.png)\n\n  Great, your ROKS Managed cluster is configured and ready to use.\n\n***\n\n## (Optional) Configuring your IKS Cluster context\n\n> There is a known issue to import IKS Kubernetes 1.16 on CP4MCM 1.3.1. Because of that we are not using IKS in the lab yet, but we are working to solve it and it will be available soon!\n\n1.Back to the [IBM Cloud Dashboard page](https://cloud.ibm.com/).\n\n  ![](images/25-cloudpak-cli.png)\n\n2.Confirm that you are using your personal account (account with your name), not the DTE account.\n\n  ![](images/26-cloudpak-cli.png)\n\n3.On IBM Cloud Dashboard, click **Clusters** to see your IKS Free Cluster.\n\n  ![](images/27-cloudpak-cli.png)\n\n4.Click the IKS Free cluster to open the cluster view.\n\n  ![](images/28-cloudpak-cli.png)\n\n5.To configure your CLI to access this cluster, you will need the cluster name, take note of it.\n\n  ![](images/29-cloudpak-cli.png)\n\n6.Back to the Terminal window, if you are not logged in IBM Cloud CLI, go ahead and log in using your IBM Cloud API Key (check IBM Cloud CLI section on [Install CLI Tools page](../installcli) to know how to create an API key)\n\n```\nibmcloud login --apikey @myic.key -r us-south -g default -c <your_ibm_id>\n```\n\n7.Set the Kubernetes context to your cluster for this terminal session.\n```\nibmcloud ks cluster config --cluster mycluster-free\n```\n\n  ![](images/30-cloudpak-cli.png)\n\n8.Check the Kubernetes context available, running the command below:\n\n```\nkubectl config get-contexts\n```\n\n  You should have a mycluster-free that point to your IKS cluster.\n\n  ![](images/39-cloudpak-cli.png)\n\n  Next step, you will rename this context to simplify how you interact with your IKS server during our lab. Copy the full name of your mycluster-free context.\n\n9.Rename your context, running the command below:\n\n```\nkubectl config rename-context <mycluster-free/full_name> iks-free-cluster\n```\n\n10.Now, let's set the current Kubernetes context\n```\nkubectl config use-context iks-free-cluster\n```\n\n  >Note: Anytime that you want to connect to your IKS Free cluster, you just need to run the command above.\n\n11.Let's test the new context configuration. Run the command below to get the cluster nodes.\n```\nkubectl get nodes\n```\n\n  ![](images/31-cloudpak-cli.png)\n\n  Great, your IKS cluster is configured and ready to use.\n","fileAbsolutePath":"/Users/dymaczew/Documents/_code/mcm/edge-demohub/src/pages/labs/configenv/index.mdx"}}},"staticQueryHashes":["1364590287","2102389209","2102389209","227138135","227138135","2456312558","2746626797","2746626797","3018647132","3018647132","3906363820","3906363820","768070550"]}